-- main.mcl --
import "fmt"
import "iter"

# function expression
$id1 = func($x) { # definition site
	$x
}
$id2 = func($x) {
	$x + $x
}

#$str = $id1("foo")
#$int = $id1(42)

$generate = func($idn) {
	fmt.printf("%s %d",
		$idn("foo"), # 1 call site, 2 calls
		$idn(42)
	)
}

# this code should be rejected
$foo = iter.map([$id1, $id2,], $generate)

#test $foo[0] {}
test listlookup($foo, 0, "fail") {} # TODO: add syntactic sugar for listlookup
-- OUTPUT --
Vertex: test[foo 84]
